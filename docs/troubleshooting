# Soluci√≥n de Problemas MCP

## üö® Problemas Comunes

### 1. Servidor MCP no conecta

**S√≠ntomas**: 
- Servidor aparece como "desconectado"
- Tools no est√°n disponibles
- Error de timeout

**Soluciones**:
```bash
# Verificar que uv est√© instalado
uv --version

# Reinstalar uv si es necesario
pip install uv

# Verificar permisos del archivo de configuraci√≥n
chmod 644 ~/.aws/amazonq/mcp.json

# Probar instalaci√≥n manual del servidor
uvx awslabs.aws-api-mcp-server@latest
```

### 2. Error de permisos AWS

**S√≠ntomas**:
- "Access Denied" en operaciones AWS
- Credenciales no v√°lidas

**Soluciones**:
```bash
# Verificar configuraci√≥n AWS CLI
aws configure list

# Verificar credenciales
aws sts get-caller-identity

# Reconfigurar si es necesario
aws configure
```

### 3. Timeout en conexi√≥n

**S√≠ntomas**:
- Servidor tarda mucho en conectar
- Timeout errors

**Soluciones**:
- Aumentar timeout en configuraci√≥n:
```json
{
  "mcpServers": {
    "aws-api": {
      "command": "uvx",
      "args": ["awslabs.aws-api-mcp-server@latest"],
      "timeout": 120,
      "env": {
        "FASTMCP_LOG_LEVEL": "ERROR"
      }
    }
  }
}
```

### 4. Conflictos de versiones Python

**S√≠ntomas**:
- Error al ejecutar `uvx`
- Problemas de dependencias

**Soluciones**:
```bash
# Verificar versi√≥n Python
python3 --version

# Actualizar uv
pip install --upgrade uv

# Limpiar cach√© uv
uv cache clean
```

## üîç Diagn√≥stico

### Verificar logs

**VS Code/Amazon Q**:
```bash
# Logs globales
tail -f ~/.aws/amazonq/logs/mcp.log

# Logs locales
tail -f .amazonq/logs/mcp.log
```

**Claude Desktop**:
```bash
# macOS
tail -f ~/Library/Logs/Claude/mcp.log

# Windows
type %APPDATA%\Claude\Logs\mcp.log
```

### Probar servidor manualmente

```bash
# Probar servidor espec√≠fico
uvx awslabs.aws-api-mcp-server@latest

# Con variables de entorno
FASTMCP_LOG_LEVEL=DEBUG uvx awslabs.aws-api-mcp-server@latest
```

### Verificar conectividad de red

```bash
# Verificar acceso a PyPI
curl -I https://pypi.org/

# Verificar acceso a AWS
aws sts get-caller-identity
```

## üõ†Ô∏è Configuraci√≥n de Debug

### Habilitar logs detallados

```json
{
  "mcpServers": {
    "aws-api": {
      "command": "uvx",
      "args": ["awslabs.aws-api-mcp-server@latest"],
      "env": {
        "FASTMCP_LOG_LEVEL": "DEBUG",
        "PYTHONUNBUFFERED": "1"
      }
    }
  }
}
```

### Variables de entorno √∫tiles

```json
{
  "env": {
    "FASTMCP_LOG_LEVEL": "DEBUG",
    "AWS_DEFAULT_REGION": "us-east-1",
    "AWS_PROFILE": "default",
    "PYTHONUNBUFFERED": "1",
    "UV_CACHE_DIR": "/tmp/uv-cache"
  }
}
```

## üìã Checklist de Verificaci√≥n

### Antes de reportar un problema:

- [ ] ‚úÖ Python 3.8+ instalado
- [ ] ‚úÖ `uv` package manager instalado
- [ ] ‚úÖ AWS CLI configurado y funcionando
- [ ] ‚úÖ Archivo de configuraci√≥n en ubicaci√≥n correcta
- [ ] ‚úÖ Sintaxis JSON v√°lida
- [ ] ‚úÖ Permisos de archivo correctos
- [ ] ‚úÖ Reiniciado el IDE/aplicaci√≥n
- [ ] ‚úÖ Verificado logs de error
- [ ] ‚úÖ Probado servidor manualmente

## üÜò Obtener Ayuda

### Informaci√≥n √∫til para reportar problemas:

1. **Sistema operativo** y versi√≥n
2. **IDE/aplicaci√≥n** y versi√≥n
3. **Versi√≥n de Python**: `python3 --version`
4. **Versi√≥n de uv**: `uv --version`
5. **Configuraci√≥n AWS**: `aws configure list`
6. **Archivo de configuraci√≥n** (sin credenciales)
7. **Logs de error** completos
8. **Pasos para reproducir** el problema

### Recursos adicionales:

- [Documentaci√≥n oficial MCP](https://awslabs.github.io/mcp/)
- [AWS Q Developer Documentation](https://docs.aws.amazon.com/amazonq/)
- [GitHub Issues](https://github.com/awslabs/mcp/issues)
